# PostgressJavaApp
Spring mvc web application connecting to postgress DB
This is a spring based java app which uses postgres.

This app uses multi stage docker image build. The Dockerfile has two FROM instructions. The first stage build the spring web application.
The second stage creates the image ans copies the war file built in the fisrt stage.

To use this app. Git clone the repo.
run docker image build -t spjapp:latest .

Pre requisites to run the application locally. 
1. Install Postgres db on host machine.
2. Create a postgres database and under public schema create a table namely student.

CREATE TABLE public.student (
 	id int4 NOT NULL GENERATED BY DEFAULT AS IDENTITY,
 	age int4 NOT NULL,
 	"name" varchar(20) NULL,
 	CONSTRAINT student_pk PRIMARY KEY (id)
);
insert into student (name, age) values ('atharva', 10);

Interactive mode

Docker command for dataSourceWithSecretsManager <br/>
docker run --rm -it -p 8080:8080/tcp spjapp:latest

Docker command for dataSourceWithEnvironmentVariables <br/>
docker run --rm -it -p 8080:8080/tcp -e username=postgres -e password=postgres -e url=jdbc:postgresql://host.docker.internal:5432/postgres spjapp:latest

Docker command for dataSourceWith db.properties File <br/>
docker run --rm -it -p 8080:8080 spjapp:latest

